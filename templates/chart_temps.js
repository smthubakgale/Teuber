var arrcht = ["/ \n/", "/ <!--1.1 Organization Chart-->\n/", "/ <section>\n/", "/ <!--Title-->\n/", "/ <div style=\"padding: 10px; text-align: center; display: flex; color: #717A7F;\">\n/", "/ <div style=\"flex:3;\"></div>\n/", "/ <div>\n/", "/ Organization Chart\n/", "/ </div>\n/", "/ <div style=\"flex:1;\"></div>\n/", "/ <style>\n/", "/ .rns {\n/", "/ font-weight: bold;\n/", "/ color: #E48380;\n/", "/ }\n/", "/ </style>\n/", "/ <div style=\"cursor:pointer;\" onclick=\"makeorgchart(this , false , null)\">\n/", "/ <span class=\"fa fa-play\"></span> <span class=\"rns\"> Build </span>\n/", "/ </div>\n/", "/ <div style=\"width:20px;\"></div>\n/", "/ <div style=\"cursor:pointer;\" onclick=\"print_orgchart(this)\">\n/", "/ <span class=\"fa fa-print\"></span> <span class=\"rns\"> Print </span>\n/", "/ </div>\n/", "/ <div style=\"flex:1;\"></div>\n/", "/ </div>\n/", "/ <!--Preview-->\n/", "/ <style>\n/", "/ .orgchartd {\n/", "/ width: 800px;\n/", "/ max-height: 80vh;\n/", "/ overflow: scroll;\n/", "/ margin: auto;\n/", "/ margin-top: 10px;\n/", "/ min-height: 80px;\n/", "/ border: solid silver 1px;\n/", "/ }\n/", "/ \n/", "/ .orgchartd::-webkit-scrollbar {\n/", "/ }\n/", "/ \n/", "/ .orgchartd::-webkit-scrollbar-track {\n/", "/ box-shadow: inset 0 0 5px grey;\n/", "/ }\n/", "/ \n/", "/ .orgchartd::-webkit-scrollbar-thumb {\n/", "/ background: #717A7F;\n/", "/ border-radius: 10px;\n/", "/ }\n/", "/ \n/", "/ .orgchartd::-webkit-scrollbar {\n/", "/ width: 10px;\n/", "/ }\n/", "/ </style>\n/", "/ <div class=\"orgchartd\" id=\"orgchart\">\n/", "/ \n/", "/ </div>\n/", "/ <!--Data-->\n/", "/ <div>\n/", "/ <script>\n/", "/ // Helpers\n/", "/ function getlevel(obj) {\n/", "/ return (obj.length - clear(obj, \".\").length) + 1\n/", "/ }\n/", "/ function clear(str, ch) {\n/", "/ \n/", "/ if (str.indexOf(ch) == -1) {\n/", "/ return str;\n/", "/ }\n/", "/ var ret = str;\n/", "/ while (ret.indexOf(ch) != -1) {\n/", "/ ret = ret.replace(ch, \"\");\n/", "/ }\n/", "/ return ret;\n/", "/ }\n/", "/ function replaceT(str, ch, ch2) {\n/", "/ var ret = str;\n/", "/ while (ret.indexOf(ch) != -1) {\n/", "/ ret = ret.replace(ch, ch2);\n/", "/ }\n/", "/ return ret;\n/", "/ }\n/", "/ function getParent(inp) {\n/", "/ var ret = inp;\n/", "/ var a = (inp + \"\").lastIndexOf(\".\");\n/", "/ if (a != -1) {\n/", "/ ret = ret.substring(0, a);\n/", "/ }\n/", "/ else {\n/", "/ ret = null;\n/", "/ }\n/", "/ \n/", "/ return ret;\n/", "/ }\n/", "/ function haschilds(tag, arr) {\n/", "/ var ret = false;\n/", "/ $.each(arr, (index, item) => {\n/", "/ if (item.TID.indexOf(tag) == 0) {\n/", "/ ret = true\n/", "/ }\n/", "/ });\n/", "/ return ret;\n/", "/ }\n/", "/ function getlastchild(tag, arr) {\n/", "/ \n/", "/ var par = getParent(tag);\n/", "/ var k = 0;\n/", "/ $.each(arr, (index, item) => {\n/", "/ if (item.TID.indexOf(par) == 0) {\n/", "/ k = index;\n/", "/ }\n/", "/ });\n/", "/ var ret = arr[k].TID;\n/", "/ return ret;\n/", "/ }\n/", "/ //Method\n/", "/ function print_orgchart(tag) {\n/", "/ makeorgchart(tag, false, null);\n/", "/ \n/", "/ setTimeout(function () {\n/", "/ var j = $(tag).parent().parent().parent().parent().find(\".orgchartd\");\n/", "/ var zoom = parseFloat((j.innerWidth() / 785)).toFixed(2);\n/", "/ \n/", "/ \n/", "/ var bod = $(\"<div/>\").html(j.clone()).html();\n/", "/ var post = '<div style=\"padding-right: 10px; color: #717A7F; font-size:13px; font-weight: 700; margin-top:15px; text-align:center;\">'\n/", "/ + 'generated by <span style=\"color: #E48380;\"> Teuber </span>'\n/", "/ + '</div>';\n/", "/ \n/", "/ var o = window.open(\"\", \"_blank\", \"width=900,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\n/", "/ o.document.open();\n/", "/ o.document.write(\"<!doctype html><html><head><title>Teuber <\\/title> <\\/head><body style='width: 785px; zoom:\" + zoom + \"' onload=\\\"print();\\\">\" + bod + post + \"<\\/body><\\/html>\");\n/", "/ o.document.close();\n/", "/ }, 2500)\n/", "/ \n/", "/ }\n/", "/ function makeorgchart(tag) {\n/", "/ var data = JSON.parse($(tag).parent().parent().parent().parent().find(\".orgd\").val());\n/", "/ var temp = $(\"<div/>\").html($(tag).parent().parent().parent().parent().find(\".orgt\").html().trim());\n/", "/ var par = $(tag).parent().parent().parent().parent().find(\".orgchartd\");\n/", "/ \n/", "/ var level = 1;\n/", "/ var inp = [];\n/", "/ var lines = [];\n/", "/ \n/", "/ $.each(data, (index, item) => {\n/", "/ var id = item.TID;\n/", "/ var a = getlevel(id);\n/", "/ level = (a > level) ? a : level;\n/", "/ lines.push(id);\n/", "/ });\n/", "/ \n/", "/ for (var k = 0; k < level; k++) {\n/", "/ var row = [];\n/", "/ $.each(data, (index, item) => {\n/", "/ var id = item.TID;\n/", "/ if ((k + 1) == getlevel(id)) {\n/", "/ var nm = (item.Names.length == 0) ? \"\" : item.Names[0];\n/", "/ row.push({\n/", "/ \"TID\": id,\n/", "/ \"FirstName\": nm + \" \",\n/", "/ \"LastName\": item.LastName,\n/", "/ \"Role\": item.Role,\n/", "/ \"Image\": item.ProfilePic\n/", "/ })\n/", "/ }\n/", "/ });\n/", "/ inp.push(row);\n/", "/ }\n/", "/ \n/", "/ \n/", "/ var a1 = temp;\n/", "/ var b1 = $(\"<div/>\").html(a1.find(\".node\").html());\n/", "/ a1.find(\".node\").html(\"\");\n/", "/ \n/", "/ var obj = $(\"<div/>\").html(a1.html()).html();\n/", "/ var main = $(\"<div/>\").html(a1.html()).children().first();\n/", "/ main.find(\".node\").addClass(\"line_0\");\n/", "/ \n/", "/ var block = $(\"<div/>\").html(b1.html()).html();\n/", "/ \n/", "/ for (var k = 0; k < inp.length; k++) {\n/", "/ for (var i = 0; i < inp[k].length; i++) {\n/", "/ // Content\n/", "/ var id = inp[k][i].TID;\n/", "/ \n/", "/ var a = $(\"<div/>\").html(obj).children().first();\n/", "/ //\n/", "/ var u = $(\"<div/>\").html(block);\n/", "/ \n/", "/ u.find(\".fnm\").html(inp[k][i].FirstName);\n/", "/ u.find(\".lnm\").html(inp[k][i].LastName);\n/", "/ u.find(\".rle\").html(inp[k][i].Role);\n/", "/ if (inp[k][i].Image != \"\") {\n/", "/ u.find(\".oimg\").attr(\"src\", inp[k][i].Image);\n/", "/ }\n/", "/ \n/", "/ a.find(\".node\").html(u.html());\n/", "/ //\n/", "/ var ln = \"line_\" + replaceT(id, \".\", \"_\");\n/", "/ a.find(\".node\").addClass(ln);\n/", "/ \n/", "/ $(\"<div/>\").html(a).html();\n/", "/ \n/", "/ var h = $(\"<div/>\").html(a).html();\n/", "/ // Root\n/", "/ var t = getParent(id);\n/", "/ id = clear(id, \".\");\n/", "/ \n/", "/ if (t == null) {\n/", "/ if (i == 0) {\n/", "/ var y = $(\"<div/>\");\n/", "/ y.addClass(\"child\");\n/", "/ y.html(h);\n/", "/ y.addClass(\"node_\" + id);\n/", "/ var z = $(\"<div/>\").html(y).html();\n/", "/ main.find(\".childs\").html(z);\n/", "/ }\n/", "/ else {\n/", "/ var y = $(\"<div/>\");\n/", "/ y.addClass(\"child\");\n/", "/ y.html(h);\n/", "/ y.addClass(\"node_\" + id);\n/", "/ var z = $(\"<div/>\").html(main.find(\".childs\").html()).html() + $(\"<div/>\").html(y).html()\n/", "/ main.find(\".childs\").html(z);\n/", "/ }\n/", "/ }\n/", "/ else {\n/", "/ t = clear(t, \".\");\n/", "/ \n/", "/ if (i == 0) {\n/", "/ var y = $(\"<div/>\");\n/", "/ y.addClass(\"child\");\n/", "/ y.html(h);\n/", "/ y.addClass(\"node_\" + id);\n/", "/ var z = $(\"<div/>\").html(y).html();\n/", "/ main.find(\".node_\" + t).find(\".childs\").html(z);\n/", "/ }\n/", "/ else {\n/", "/ var y = $(\"<div/>\");\n/", "/ y.addClass(\"child\");\n/", "/ y.html(h);\n/", "/ y.addClass(\"node_\" + id);\n/", "/ var z = $(\"<div/>\").html(main.find(\".node_\" + t).find(\".childs\").html()).html() + $(\"<div/>\").html(y).html()\n/", "/ main.find(\".node_\" + t).find(\".childs\").html(z);\n/", "/ }\n/", "/ }\n/", "/ }\n/", "/ }\n/", "/ \n/", "/ par.html($(\"<div/>\").html(main).html());\n/", "/ par.css(\"margin\", \"auto\");\n/", "/ // Add Lines\n/", "/ for (var k = 0; k < inp.length; k++) {\n/", "/ for (var i = 0; i < inp[k].length; i++) {\n/", "/ var id = inp[k][i].TID;\n/", "/ var t = getParent(id);\n/", "/ \n/", "/ id = \"line_\" + replaceT(id, \".\", \"_\");\n/", "/ t = (t != null) ? \"line_\" + replaceT(id, \".\", \"_\") : t;\n/", "/ // Parent Vertical\n/", "/ var haschild = (k + 1 == inp.length) ? false : haschilds(inp[k][i].TID, inp[k + 1]);\n/", "/ \n/", "/ if (!haschild) {\n/", "/ $(\".\" + id).find(\".prnt\").remove();\n/", "/ $(\".\" + id).find(\".itb2\").remove();\n/", "/ }\n/", "/ if (t == null) {\n/", "/ if (inp[k].length == 1) {\n/", "/ // Remove Horizontal\n/", "/ $(\".\" + id).find(\".sbh\").remove();\n/", "/ //\n/", "/ }\n/", "/ else {\n/", "/ // Adjust Horizontal\n/", "/ var id2 = \"line_\" + replaceT(inp[k][inp[k].length - 1].TID, \".\", \"_\");\n/", "/ \n/", "/ var x1 = $(\".\" + id).offset().left;\n/", "/ var x2 = $(\".\" + id2).offset().left;\n/", "/ x = x2 - x1;\n/", "/ $(\".\" + id).find(\".sbh\").css(\"width\", x + \"px\");\n/", "/ //\n/", "/ }\n/", "/ }\n/", "/ else {\n/", "/ // Horizontal\n/", "/ var z = getlastchild(inp[k][i].TID, inp[k]);\n/", "/ var id2 = \"line_\" + replaceT(z, \".\", \"_\");\n/", "/ \n/", "/ var x1 = $(\".\" + id).offset().left;\n/", "/ var x2 = $(\".\" + id2).offset().left;\n/", "/ x = x2 - x1;\n/", "/ $(\".\" + id).find(\".sbh\").css(\"width\", x + \"px\");\n/", "/ //\n/", "/ }\n/", "/ }\n/", "/ }\n/", "/ }\n/", "/ </script>\n/", "/ <textarea class=\"orgd\" contenteditable=\"true\" style=\"width:80%; margin-left:10%; margin-top:15px; height:100px; padding:10px; border:solid;\">\n/", "/ </textarea>\n/", "/ <div class=\"orgt\" style=\"width: 70%; margin: auto; min-height: 80px; padding: 10px; padding-top: 60px; margin-top: 15px; margin-bottom: 20px; border: solid #CCD6EB 1.5px;\">\n/", "/ \n/", "/ <div>\n/", "/ <style>\n/", "/ \n/", "/ .grdb {\n/", "/ background: linear-gradient(-90deg, #F6D9D9 1.5px, transparent 1px), linear-gradient(#F6D9D9 1px, transparent 1px), linear-gradient(-90deg, #F6D9D9 1.5px, transparent 1px), linear-gradient(#F6D9D9 1px, transparent 1px), linear-gradient(transparent 3px, #FFFFFF 3px, #FFFFFF 78px, transparent 78px), linear-gradient(-90deg, #F6D9D9 1px, transparent 1px), linear-gradient(-90deg, transparent 3px, #FFFFFF 3px, #FFFFFF 78px, transparent 78px), linear-gradient(#F6D9D9 1px, transparent 1px), #FFFFFF;\n/", "/ background-size: 16px 16px, 16px 16px, 80px 80px, 80px 80px, 80px 80px, 80px 80px, 80px 80px, 80px 80px;\n/", "/ }\n/", "/ \n/", "/ .org {\n/", "/ width: 100%;\n/", "/ }\n/", "/ \n/", "/ .node {\n/", "/ margin: auto;\n/", "/ text-align: center;\n/", "/ width: 160px;\n/", "/ }\n/", "/ \n/", "/ .line {\n/", "/ min-height: 110px;\n/", "/ }\n/", "/ \n/", "/ .childs {\n/", "/ width: 100%;\n/", "/ display: flex;\n/", "/ }\n/", "/ \n/", "/ .childs .child {\n/", "/ flex: 1;\n/", "/ text-align: center;\n/", "/ }\n/", "/ \n/", "/ .itb {\n/", "/ width: 150px;\n/", "/ margin: auto;\n/", "/ cursor: pointer;\n/", "/ padding: 5px;\n/", "/ background-color: transparent;\n/", "/ position: relative;\n/", "/ }\n/", "/ \n/", "/ .itb:hover {\n/", "/ background-color: #F6EC9A;\n/", "/ }\n/", "/ \n/", "/ .itb:hover > .cvl {\n/", "/ display: block;\n/", "/ }\n/", "/ \n/", "/ .itb:hover > .cvr {\n/", "/ display: block;\n/", "/ }\n/", "/ \n/", "/ .itb:hover > .cvt {\n/", "/ display: block;\n/", "/ }\n/", "/ \n/", "/ .itb:hover > .cvb {\n/", "/ display: block;\n/", "/ }\n/", "/ \n/", "/ .cvl {\n/", "/ display: none;\n/", "/ position: absolute;\n/", "/ left: -3px;\n/", "/ top: 10px;\n/", "/ color: #9DC56F;\n/", "/ }\n/", "/ \n/", "/ .cvl:hover {\n/", "/ color: #449D44;\n/", "/ left: 0px;\n/", "/ }\n/", "/ \n/", "/ .cvr {\n/", "/ display: none;\n/", "/ position: absolute;\n/", "/ left: 100%;\n/", "/ margin-left: -8px;\n/", "/ top: 10px;\n/", "/ color: #9DC56F;\n/", "/ }\n/", "/ \n/", "/ .cvr:hover {\n/", "/ color: #449D44;\n/", "/ margin-left: -11px;\n/", "/ }\n/", "/ \n/", "/ .cvt {\n/", "/ display: none;\n/", "/ position: absolute;\n/", "/ left: 45%;\n/", "/ top: -13px;\n/", "/ color: #9DC56F;\n/", "/ }\n/", "/ \n/", "/ .cvt:hover {\n/", "/ color: #449D44;\n/", "/ top: -10px;\n/", "/ }\n/", "/ \n/", "/ .cvb {\n/", "/ display: none;\n/", "/ position: absolute;\n/", "/ left: 45%;\n/", "/ top: 30px;\n/", "/ color: #9DC56F;\n/", "/ }\n/", "/ \n/", "/ .cvb:hover {\n/", "/ color: #449D44;\n/", "/ top: 27px;\n/", "/ }\n/", "/ \n/", "/ .cim {\n/", "/ /*  display: none;*/\n/", "/ position: absolute;\n/", "/ left: 70%;\n/", "/ top: 35px;\n/", "/ margin-left: 3px;\n/", "/ width: 50px;\n/", "/ height: 50px;\n/", "/ border-radius: 50%;\n/", "/ overflow: visible;\n/", "/ box-shadow: 1px 1px 1px 2px #DDDDDD;\n/", "/ padding: 5px;\n/", "/ z-index: 99;\n/", "/ background-color: white;\n/", "/ }\n/", "/ \n/", "/ .cim .fa-circle {\n/", "/ position: absolute;\n/", "/ top: -10px;\n/", "/ font-size: 10px;\n/", "/ left: 44%;\n/", "/ color: #E48380;\n/", "/ }\n/", "/ \n/", "/ .cim div {\n/", "/ position: relative\n/", "/ }\n/", "/ \n/", "/ .cim img {\n/", "/ width: 50px;\n/", "/ height: 50px;\n/", "/ border-radius: 50%;\n/", "/ }\n/", "/ \n/", "/ .itb1 {\n/", "/ width: 100%;\n/", "/ color: white;\n/", "/ display: flex;\n/", "/ background-color: rgba(225, 117, 114, 0.9);\n/", "/ border-top-right-radius: 7px;\n/", "/ border-top-left-radius: 7px;\n/", "/ }\n/", "/ \n/", "/ .itb2 {\n/", "/ margin-left: 5px;\n/", "/ padding-top: 3px;\n/", "/ font-size: 10px;\n/", "/ }\n/", "/ \n/", "/ .itb3 {\n/", "/ margin-left: 5px;\n/", "/ font-size: 10px;\n/", "/ text-align: center;\n/", "/ font-weight: 500;\n/", "/ flex: 1;\n/", "/ }\n/", "/ \n/", "/ .itb4 {\n/", "/ width: 150px;\n/", "/ font-size: 10px;\n/", "/ padding-top: 2px;\n/", "/ padding-bottom: 2px;\n/", "/ text-align: center;\n/", "/ background-color: #EEEEEE;\n/", "/ color: #333333;\n/", "/ font-weight: 600;\n/", "/ border-bottom-right-radius: 7px;\n/", "/ border-bottom-left-radius: 7px;\n/", "/ position: absolute;\n/", "/ top: -2px;\n/", "/ margin-left: -2px;\n/", "/ }\n/", "/ \n/", "/ .itb5 {\n/", "/ width: 100%;\n/", "/ position: relative;\n/", "/ }\n/", "/ \n/", "/ .sbv {\n/", "/ position: absolute;\n/", "/ width: 2px;\n/", "/ top: -50px;\n/", "/ left: 50%;\n/", "/ min-height: 50px;\n/", "/ border: none;\n/", "/ color: #E48380;\n/", "/ border-left: solid #E48380 2px;\n/", "/ }\n/", "/ \n/", "/ .sbh {\n/", "/ position: absolute;\n/", "/ width: 100px;\n/", "/ top: -50px;\n/", "/ left: 50%;\n/", "/ height: 2px;\n/", "/ border: none;\n/", "/ color: #E48380;\n/", "/ border-top: solid #E48380 2px;\n/", "/ }\n/", "/ \n/", "/ .itb6 {\n/", "/ width: 100%;\n/", "/ position: relative;\n/", "/ border: solid transparent;\n/", "/ }\n/", "/ \n/", "/ .itb7 {\n/", "/ position: relative;\n/", "/ }\n/", "/ \n/", "/ .itb8 {\n/", "/ position: relative;\n/", "/ width: 2px;\n/", "/ margin: auto;\n/", "/ min-height: 62px;\n/", "/ border: none;\n/", "/ color: #E48380;\n/", "/ border-left: solid #E48380 2px;\n/", "/ }\n/", "/ \n/", "/ .itb9 {\n/", "/ position: absolute;\n/", "/ left: -5.8px;\n/", "/ top: -8px;\n/", "/ }\n/", "/ \n/", "/ .prnt {\n/", "/ position: absolute;\n/", "/ width: 100%;\n/", "/ padding-top: 20px;\n/", "/ }\n/", "/ </style>\n/", "/ <div style=\"margin-top:10px;\">\n/", "/ <div class=\"org\">\n/", "/ <div style=\"width:100%;\">\n/", "/ <div class=\"node\">\n/", "/ <div class=\"itb\">\n/", "/ <div class=\"itb5\">\n/", "/ <div class=\"sbv\"></div>\n/", "/ <div class=\"sbh\"></div>\n/", "/ </div>\n/", "/ <div class=\"itb1\">\n/", "/ <div class=\"itb2 fa fa-users\"></div>\n/", "/ <div class=\"itb3\">\n/", "/ <span class=\"fnm\"></span>\n/", "/ <span class=\"lnm\"></span>\n/", "/ </div>\n/", "/ </div>\n/", "/ <div class=\"itb6\">\n/", "/ <div class=\"itb7\">\n/", "/ <div class=\"prnt\">\n/", "/ <div class=\"itb8\">\n/", "/ <span class=\"fa fa-caret-up itb9\"></span>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ <div class=\"itb4\">\n/", "/ <span class=\"rle\"></span>\n/", "/ </div>\n/", "/ \n/", "/ </div>\n/", "/ <div class=\"cvl\">\n/", "/ <span class=\"fa fa-chevron-right\"></span>\n/", "/ </div>\n/", "/ <div class=\"cvr\">\n/", "/ <span class=\"fa fa-chevron-left\"></span>\n/", "/ </div>\n/", "/ <div class=\"cvt\">\n/", "/ <span class=\"fa fa-chevron-down\"></span>\n/", "/ </div>\n/", "/ <div class=\"cvb\">\n/", "/ <span class=\"fa fa-chevron-up\"></span>\n/", "/ </div>\n/", "/ <div class=\"cim\">\n/", "/ <div>\n/", "/ <img class=\"oimg\" src=\"assets/img/avatars/4.jpg\">\n/", "/ <span class=\"fa fa-circle\"></span>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ <div class=\"line\"></div>\n/", "/ </div>\n/", "/ <div class=\"childs\"></div>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ </div>\n/", "/ </section>\n/", "/ \n/"]; var str = ""; $.each(arrcht, (k, item) => { str += item.substring(1, item.length - 1); }); var charttemp = $("<div/>").html(str);